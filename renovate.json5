{
  // Validate against Renovate JSON schema
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',

  // Base configuration presets
  extends: [
    'config:recommended', // Core preset
    ':configMigration', // Migrate renovate configuration when necessary
    ':enablePreCommit', // Enable pre-commit hook updates
    ':combinePatchMinorReleases', // Combine patch and minor releases
    ':separateMajorReleases', // Handle major updates separately
    'docker:enableMajor', // Enable major Docker updates
    'docker:pinDigests', // Pin Docker digests,
    'group:monorepos', // Common monorepo groupings
  ],

  // Set timezone to Indianapolis
  timezone: 'America/Indiana/Indianapolis',

  // Version management strategies
  rangeStrategy: 'bump', // Bump ranges to next version
  bumpVersion: 'patch', // Use patch version for bumping

  // Enable dependency dashboard for overview
  dependencyDashboard: true,

  // Limit concurrent PRs to avoid overwhelming CI
  prConcurrentLimit: 10,

  // Rebase strategy
  rebaseWhen: 'auto',

  // Default schedule for when to run updates
  schedule: [
    'after 8am and before 8pm on saturday',
  ],

  // Wait 7 days before updating packages
  minimumReleaseAge: '7 days',

  // Automerge on by default via a branch
  automerge: true,
  automergeType: 'branch',

  // Security update configuration
  vulnerabilityAlerts: {
    enabled: true,
    labels: [
      'security',
    ],
    schedule: 'at any time', // Process security updates immediately
  },

  // Disable lock file maintenance
  lockFileMaintenance: {
    // These updates are hard to reproduce locally and seem to consistently have issues merging
    enabled: false,
  },

  // Package update rules
  packageRules: [
    {
      // Group all non-major dependencies
      matchUpdateTypes: [
        'minor',
        'patch',
      ],
      matchCurrentVersion: '!/^0/', // Exclude 0.x versions
      groupName: 'non-major dependencies',
      matchPackageNames: [
        '!/^@stanlemon/',
      ],
    },
    {
      // Handle major updates separately
      matchUpdateTypes: [
        'major',
      ],
      groupName: 'major updates',
      minimumReleaseAge: '14 days', // Longer waiting period
      matchPackageNames: [
        '!/^@stanlemon/',
      ],
      automergeType: 'pr', // Create a PR
    },
    {
      // Group all eslint related packages
      groupName: 'eslint',
      matchPackageNames: [
        '/^eslint$/',
        '/^typescript-eslint$/',
        '/^eslint-*/',
        '/^@eslint*/',
      ],
      automergeType: 'pr', // Create a PR
    },
    {
      // Group all react related packages
      'groupName': 'react',
      'matchPackageNames': [
        'react',
        'react-dom',
        'react-refresh',
        '@types/react',
        '@types/react-dom',
      ],
    },
    {
      // Special handling for @stanlemon packages
      groupName: 'my own packages',
      minimumReleaseAge: null, // No waiting period
      matchPackageNames: [
        '/^@stanlemon/',
      ],
    },
    // Disable updating nodejs package peer dependencies
    {
      matchDepTypes: [
        'peerDependencies'
      ],
      enabled: false
    },
    // Node.js updates
    // The idea here is to group nvmrc updates, npm engines updates and @types/node update together
    // and to try to update them after they've baked.
    // Renovate tries to keep node updates to LTS, so in theory we should only see major LTS updates.
    {
      // Special handling for major Node.js updates
      groupName: 'nodejs updates',
      matchPackageNames: [
        'node',
      ],
      matchDatasources: [
        'docker',
        'node-version',
        'npm',
        'nvm',
      ],
      matchUpdateTypes: [
        'major',
      ],
      minimumReleaseAge: '7 months', // One month waiting period
      automergeType: 'pr', // Create a PR
      automerge: false,
    },
    {
      // Disable non-major Node.js updates
      groupName: 'nodejs updates',
      matchPackageNames: [
        'node',
      ],
      matchDatasources: [
        'docker',
        'node-version',
        'npm',
        'nvm',
      ],
      matchUpdateTypes: [
        'minor',
        'patch',
      ],
      enabled: false,
    },
    {
      // Update Node.js engines in package file
      groupName: 'nodejs updates',
      matchUpdateTypes: [
        'major',
      ],
      matchManagers: [
        'npm',
      ],
      matchDepTypes: [
        'engines',
      ],
      matchPackageNames: [
        'node',
      ],
      minimumReleaseAge: '7 months',
    },
    {
      // Disable minor & patch updates for Node.js engines
      matchUpdateTypes: [
        'minor',
        'patch',
      ],
      matchManagers: [
        'npm',
      ],
      matchDepTypes: [
        'engines',
      ],
      matchPackageNames: [
        'node',
      ],
      enabled: false,
    },
    {
      // Update nodejs types
      groupName: 'nodejs updates',
      matchUpdateTypes: [
        'major',
      ],
      matchManagers: [
        'npm',
      ],
      matchPackageNames: [
        '@types/node',
      ],
      minimumReleaseAge: '7 months',
    },
    {
      // Disable patch updates for nodejs types
      matchUpdateTypes: [
        'minor',
        'patch',
      ],
      matchManagers: [
        'npm',
      ],
      matchPackageNames: [
        '@types/node',
      ],
      enabled: false,
    },
  ],
}